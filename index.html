<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		/*
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		*/
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
	
	
	//counter for messages
	var count = document.getElementById("count");
	count.innerHTML = window.geemails.length;
	
	var senders=[];
	var subjects=[];
	var dates=[];
	var messageContent=[];
	
	var mytable = document.getElementById("myTable");
	function addMessagesToArrays() {
		for (var i = 0; i < window.geemails.length; i++) {
		  	var row = mytable.insertRow(i+1);
			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);
			senders[i] = window.geemails[i].sender;
			subjects[i] = window.geemails[i].subject;
			dates[i] = window.geemails[i].date;
			messageContent[i] = window.geemails[i].body;
		}
	}
	addMessagesToArrays();
	
	function generateInitialTable() {
		for (var i =0; i<senders.length; i++) {
			var row = mytable.insertRow(i+1)
			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);
			cell1.innerHTML = senders[i];
			cell2.innerHTML = subjects[i];
			cell3.innerHTML = dates[i];
		}
	}
	generateInitialTable();
	
	function addNewMessagesToArray() {
		var z = window.geemails.length 
		window.geemails.push(generateMessage());
		senders[z] = window.geemails[z].sender;
		subjects[z] = window.geemails[z].subject;
		dates[z] = window.geemails[z].date;
		messageContent[z] = window.geemails[z].body;
	}
	
	function generateNewTable() {
		var row = mytable.insertRow(senders.length+1)
		var cell1 = row.insertCell(0);
		var cell2 = row.insertCell(1);
		var cell3 = row.insertCell(2);
		cell1.innerHTML = senders[senders.length-1];
		cell2.innerHTML = subjects[subjects.length-1];
		cell3.innerHTML = dates[dates.length-1];
		}
	}
	
	function reloadUpdatedTable() {
		addNewMessagesToArray();
		generateNewTable();
	}
	
	setInterval(reloadUpdatedTable, 5000);
	
	
	/* after clicking a row of a message, this function will be called and will generate a new pop up window with the email's body 
	function messagePopUp() {	
		var myWindow = window.open("", "MsgWindow", "width=1000,height=500");
		myWindow.document.write(messageContent);
	}
	*/
	
	
	

      };
    </script>
    		<h1>Geemails</h1>
    
	</head>
	<body>
		<div class="container" id="main">
			<div class="nav">
				Inbox
				<div id = "count"></div>
			</div>
			
			<table style="width:90%" id = "myTable">
				  <tr>
				    <th>Sender</th>
				    <th>Subject</th> 
				    <th>Date</th>
				  </tr>
				  
			</table>
		</div>
	</body>
</html>
